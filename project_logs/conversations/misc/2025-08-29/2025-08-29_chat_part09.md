>   touch "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_v${v}.pdf"
> done
iMac:ruberututor_knowledge_pack studio$ for v in A B C D; do
>   touch "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_v${v}.pdf"
> done
iMac:ruberututor_knowledge_pack studio$ ls -1 "$HOME/Downloads" | grep -E 'Gr1_Math_B_Number_B1-1_Count_to_50_v[A-D]\.pdf|Gr9_English_ReadingLiterature_RL1_Theme_Inference_v[A-D]\.pdf'
Gr1_Math_B_Number_B1-1_Count_to_50_vA.pdf
Gr1_Math_B_Number_B1-1_Count_to_50_vB.pdf
Gr1_Math_B_Number_B1-1_Count_to_50_vC.pdf
Gr1_Math_B_Number_B1-1_Count_to_50_vD.pdf
Gr9_English_ReadingLiterature_RL1_Theme_Inference_vA.pdf
Gr9_English_ReadingLiterature_RL1_Theme_Inference_vB.pdf
Gr9_English_ReadingLiterature_RL1_Theme_Inference_vC.pdf
Gr9_English_ReadingLiterature_RL1_Theme_Inference_vD.pdf
iMac:ruberututor_knowledge_pack studio$ # Step 10 â€” Auto-route the dummy PDFs into the repo
iMac:ruberututor_knowledge_pack studio$ bash tools/auto_route_pdfs.sh worksheets "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vA.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vB.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vC.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vD.pdf"
awk: syntax error at source line 20
 context is
	        print "ok=1; gfolder=\""gfolder"\"; subject=\""subjl"\"; >>>  strand=\""< <<< <strand<<"\""
awk: illegal statement at source line 20
âŒ Unrecognized filename (cannot parse grade/subject/strand): Gr1_Math_B_Number_B1-1_Count_to_50_vA.pdf
iMac:ruberututor_knowledge_pack studio$ 
iMac:ruberututor_knowledge_pack studio$ bash tools/auto_route_pdfs.sh assessments "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vA.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vB.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vC.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vD.pdf"
awk: syntax error at source line 20
 context is
	        print "ok=1; gfolder=\""gfolder"\"; subject=\""subjl"\"; >>>  strand=\""< <<< <strand<<"\""
awk: illegal statement at source line 20
âŒ Unrecognized filename (cannot parse grade/subject/strand): Gr9_English_ReadingLiterature_RL1_Theme_Inference_vA.pdf
iMac:ruberututor_knowledge_pack studio$ # Step 11 â€” Verify files landed in the correct folders
iMac:ruberututor_knowledge_pack studio$ ls -R materials/worksheets/math/gr1/B_Number
ls: materials/worksheets/math/gr1/B_Number: No such file or directory
iMac:ruberututor_knowledge_pack studio$ ls -R materials/assessments/english/gr9/ReadingLiterature
ls: materials/assessments/english/gr9/ReadingLiterature: No such file or directory
iMac:ruberututor_knowledge_pack studio$ # Step 12 â€” View the auto-route audit report and the global variant audit
iMac:ruberututor_knowledge_pack studio$ tail -n 120 "$(ls -t project_logs/reports/auto_route_audit_*.txt | head -n1)"
ls: project_logs/reports/auto_route_audit_*.txt: No such file or directory
tail: : No such file or directory
iMac:ruberututor_knowledge_pack studio$ bash tools/check_variants.sh
Report saved to: project_logs/reports/variants_report_2025-08-28.txt
iMac:ruberututor_knowledge_pack studio$ tail -n 120 "$(ls -t project_logs/reports/variants_report_*.txt | head -n1)"
Variant audit â€” Thu 28 Aug 2025 23:36:24 EDT

All worksheet/assessment PDFs have complete variants (vAâ€“vD).

Report saved to: project_logs/reports/variants_report_2025-08-28.txt
iMac:ruberututor_knowledge_pack studio$ 
ChatGPT said:
cd ~/Dropbox/ruberututor_knowledge_pack

cat > tools/auto_route_pdfs.sh <<'SH'
#!/bin/bash
set -euo pipefail

usage(){ echo "Usage: bash tools/auto_route_pdfs.sh <worksheets|assessments> <pdf1> [pdf2 ...]"; exit 1; }
[[ $# -ge 2 ]] || usage

TYPE="$1"; shift
case "$TYPE" in worksheets|assessments) ;; *) echo "âŒ TYPE must be worksheets|assessments"; exit 1;; esac

REPO="$HOME/Dropbox/ruberututor_knowledge_pack"
BASE="$REPO/materials/$TYPE"
mkdir -p "$BASE"

added=0; skipped=0; failed=0

route_one() {
  local PDF="$1"
  local base dest ok gfolder subject strand
  [[ -f "$PDF" ]] || { echo "âš ï¸  Missing file: $PDF"; ((failed++)); return; }
  base="$(basename "$PDF")"

  eval "$(
    echo "$base" | awk -F'_' '
      {
        n=NF
        grade=$1
        if (grade !~ /^Gr[0-9]{1,2}$/) { print "ok=0"; next }
        gnum=substr(grade,3)
        gfolder="gr" gnum

        subj=$2
        subjl=tolower(subj)

        strand=""
        if ($3 ~ /^[A-F]$/ && $4 ~ /^[A-Za-z]+$/) {
          strand=$3"_"$4
        } else {
          strand=$3
        }

        printf "ok=1; gfolder=\"%s\"; subject=\"%s\"; strand=\"%s\"\n", gfolder, subjl, strand
      }'
  )"

  if [[ "${ok:-0}" != "1" ]]; then
    echo "âŒ Unrecognized filename (cannot parse grade/subject/strand): $base"
    ((failed++)); return
  fi

  dest="$BASE/$subject/$gfolder/$strand"
  mkdir -p "$dest"

  if [[ -f "$dest/$base" ]]; then
    echo "â†©ï¸  Exists, skipping: $base"
    ((skipped++)); return
  fi

  cp "$PDF" "$dest/$base"
  echo "âœ… Added: $dest/$base"
  ((added++))
}

for f in "$@"; do
  route_one "$f"
done

cd "$REPO"
if (( added > 0 )); then
  git add materials
  git commit -m "Auto-route $TYPE PDFs: added $added (skipped=$skipped, failed=$failed)"
  git push
fi

report="$REPO/project_logs/reports/auto_route_audit_$(date +%F_%H%M%S).txt"
mkdir -p "$(dirname "$report")"

{
  echo "Auto-route audit â€” $(date)"
  echo "Type: $TYPE"
  echo ""
  find "$BASE" -type f -name "*_v[A-D].pdf" | awk -v SUBSEP="\034" '
  {
    f=$0; stem=f; sub(/_v[A-D]\.pdf$/, "", stem);
    seen[stem]=1;
    if (f ~ /_vA\.pdf$/) have[stem,SUBSEP "A"]=1;
    if (f ~ /_vB\.pdf$/) have[stem,SUBSEP "B"]=1;
    if (f ~ /_vC\.pdf$/) have[stem,SUBSEP "C"]=1;
    if (f ~ /_vD\.pdf$/) have[stem,SUBSEP "D"]=1;
  }
  END{
    any=0;
    for (s in seen){
      miss="";
      if (!(s SUBSEP "A" in have)) miss=miss "A ";
      if (!(s SUBSEP "B" in have)) miss=miss "B ";
      if (!(s SUBSEP "C" in have)) miss=miss "C ";
      if (!(s SUBSEP "D" in have)) miss=miss "D ";
      if (length(miss)>0){
        sub(/[ ]+$/, "", miss);
        printf "%s  â†’  missing variants: %s\n", s, miss;
        any=1;
      }
    }
    if (!any) print "All stems present with vAâ€“vD.";
  }'
  echo ""
  echo "Added=$added  Skipped=$skipped  Failed=$failed"
} > "$report"

echo "ðŸ“„ Report: $report"
SH

chmod +x tools/auto_route_pdfs.sh
git add tools/auto_route_pdfs.sh
git commit -m "Fix auto_route_pdfs.sh: robust awk printf quoting"
git push
bash tools/auto_route_pdfs.sh worksheets "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vA.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vB.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vC.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vD.pdf"
bash tools/auto_route_pdfs.sh assessments "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vA.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vB.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vC.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vD.pdf"
ls -R materials/worksheets/math/gr1/B_Number
ls -R materials/assessments/english/gr9/ReadingLiterature
tail -n 120 "$(ls -t project_logs/reports/auto_route_audit_*.txt | head -n1)"
You said:
iMac:ruberututor_knowledge_pack studio$ cd ~/Dropbox/ruberututor_knowledge_pack
iMac:ruberututor_knowledge_pack studio$ 
iMac:ruberututor_knowledge_pack studio$ cat > tools/auto_route_pdfs.sh <<'SH'
> #!/bin/bash
> set -euo pipefail
> 
> usage(){ echo "Usage: bash tools/auto_route_pdfs.sh <worksheets|assessments> <pdf1> [pdf2 ...]"; exit 1; }
> [[ $# -ge 2 ]] || usage
> 
> TYPE="$1"; shift
> case "$TYPE" in worksheets|assessments) ;; *) echo "âŒ TYPE must be worksheets|assessments"; exit 1;; esac
> 
> REPO="$HOME/Dropbox/ruberututor_knowledge_pack"
> BASE="$REPO/materials/$TYPE"
> mkdir -p "$BASE"
> 
> added=0; skipped=0; failed=0
> 
> route_one() {
>   local PDF="$1"
>   local base dest ok gfolder subject strand
>   [[ -f "$PDF" ]] || { echo "âš ï¸  Missing file: $PDF"; ((failed++)); return; }
>   base="$(basename "$PDF")"
> 
>   eval "$(
>     echo "$base" | awk -F'_' '
>       {
>         n=NF
>         grade=$1
>         if (grade !~ /^Gr[0-9]{1,2}$/) { print "ok=0"; next }
>         gnum=substr(grade,3)
>         gfolder="gr" gnum
> 
>         subj=$2
>         subjl=tolower(subj)
> 
>         strand=""
>         if ($3 ~ /^[A-F]$/ && $4 ~ /^[A-Za-z]+$/) {
>           strand=$3"_"$4
>         } else {
>           strand=$3
>         }
> 
>         printf "ok=1; gfolder=\"%s\"; subject=\"%s\"; strand=\"%s\"\n", gfolder, subjl, strand
>       }'
>   )"
> 
>   if [[ "${ok:-0}" != "1" ]]; then
>     echo "âŒ Unrecognized filename (cannot parse grade/subject/strand): $base">     ((failed++)); return
>   fi
> 
>   dest="$BASE/$subject/$gfolder/$strand"
>   mkdir -p "$dest"
> 
>   if [[ -f "$dest/$base" ]]; then
>     echo "â†©ï¸  Exists, skipping: $base"
>     ((skipped++)); return
>   fi
> 
>   cp "$PDF" "$dest/$base"
>   echo "âœ… Added: $dest/$base"
>   ((added++))
> }
> 
> for f in "$@"; do
>   route_one "$f"
> done
> 
> cd "$REPO"
> if (( added > 0 )); then
>   git add materials
>   git commit -m "Auto-route $TYPE PDFs: added $added (skipped=$skipped, failed=$failed)"
>   git push
> fi
> 
> report="$REPO/project_logs/reports/auto_route_audit_$(date +%F_%H%M%S).txt"
> mkdir -p "$(dirname "$report")"
> 
> {
>   echo "Auto-route audit â€” $(date)"
>   echo "Type: $TYPE"
>   echo ""
>   find "$BASE" -type f -name "*_v[A-D].pdf" | awk -v SUBSEP="\034" '
>   {
>     f=$0; stem=f; sub(/_v[A-D]\.pdf$/, "", stem);
>     seen[stem]=1;
>     if (f ~ /_vA\.pdf$/) have[stem,SUBSEP "A"]=1;
>     if (f ~ /_vB\.pdf$/) have[stem,SUBSEP "B"]=1;
>     if (f ~ /_vC\.pdf$/) have[stem,SUBSEP "C"]=1;
>     if (f ~ /_vD\.pdf$/) have[stem,SUBSEP "D"]=1;
>   }
>   END{
>     any=0;
>     for (s in seen){
>       miss="";
>       if (!(s SUBSEP "A" in have)) miss=miss "A ";
>       if (!(s SUBSEP "B" in have)) miss=miss "B ";
>       if (!(s SUBSEP "C" in have)) miss=miss "C ";
>       if (!(s SUBSEP "D" in have)) miss=miss "D ";
>       if (length(miss)>0){
>         sub(/[ ]+$/, "", miss);
>         printf "%s  â†’  missing variants: %s\n", s, miss;
>         any=1;
>       }
>     }
>     if (!any) print "All stems present with vAâ€“vD.";
>   }'
>   echo ""
>   echo "Added=$added  Skipped=$skipped  Failed=$failed"
> } > "$report"
> 
> echo "ðŸ“„ Report: $report"
> SH
iMac:ruberututor_knowledge_pack studio$ 
iMac:ruberututor_knowledge_pack studio$ chmod +x tools/auto_route_pdfs.sh
iMac:ruberututor_knowledge_pack studio$ git add tools/auto_route_pdfs.sh
iMac:ruberututor_knowledge_pack studio$ git commit -m "Fix auto_route_pdfs.sh: robust awk printf quoting"
[main b701d31] Fix auto_route_pdfs.sh: robust awk printf quoting
 Committer: Michael Ruberu <studio@imac.home>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 1 file changed, 3 insertions(+), 33 deletions(-)
iMac:ruberututor_knowledge_pack studio$ git push
Enumerating objects: 7, done.
Counting objects: 100% (7/7), done.
Delta compression using up to 6 threads
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 559 bytes | 559.00 KiB/s, done.
Total 4 (delta 3), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (3/3), completed with 3 local objects.
To https://github.com/RuberuTutor/ruberututor-curriculum.git
   6af25e1..b701d31  main -> main
iMac:ruberututor_knowledge_pack studio$ bash tools/auto_route_pdfs.sh worksheets "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vA.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vB.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vC.pdf" "$HOME/Downloads/Gr1_Math_B_Number_B1-1_Count_to_50_vD.pdf"
âœ… Added: /Users/studio/Dropbox/ruberututor_knowledge_pack/materials/worksheets/math/gr1/B_Number/Gr1_Math_B_Number_B1-1_Count_to_50_vA.pdf
iMac:ruberututor_knowledge_pack studio$ bash tools/auto_route_pdfs.sh assessments "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vA.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vB.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vC.pdf" "$HOME/Downloads/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vD.pdf"
âœ… Added: /Users/studio/Dropbox/ruberututor_knowledge_pack/materials/assessments/english/gr9/ReadingLiterature/Gr9_English_ReadingLiterature_RL1_Theme_Inference_vA.pdf
iMac:ruberututor_knowledge_pack studio$ ls -R materials/worksheets/math/gr1/B_Number
Gr1_Math_B_Number_B1-1_Count_to_50_vA.pdf
iMac:ruberututor_knowledge_pack studio$ ls -R materials/assessments/english/gr9/ReadingLiterature
Gr9_English_ReadingLiterature_RL1_Theme_Inference_vA.pdf
iMac:ruberututor_knowledge_pack studio$ tail -n 120 "$(ls -t project_logs/reports/auto_route_audit_*.txt | head -n1)"
ls: project_logs/reports/auto_route_audit_*.txt: No such file or directory
tail: : No such file or directory
iMac:ruberututor_knowledge_pack studio$ utor_knowledge_pack studio$ cd ~/Dropbox/ruberututor_knowledge_pack
-bash: utor_knowledge_pack: command not found
iMac:ruberututor_knowledge_pack studio$ iMac:ruberututor_knowledge_pack studio$ 
-bash: iMac:ruberututor_knowledge_pack: command not found
iMac:ruberututor_knowledge_pack studio$ iMac:ruberututor_knowledge_pack studio$ cat > tools/auto_route_pdfs.sh <<'SH'
> > #!/bin/bash
> > set -euo pipefail
> > 
> > usage(){ echo "Usage: bash tools/auto_route_pdfs.sh <worksheets|assessments> <pdf1> [pdf2 ...]"; exit 1; }
> > [[ $# -ge 2 ]] || usage
> > 
> > TYPE="$1"; shift
> > case "$TYPE" in worksheets|assessments) ;; *) echo "âŒ TYPE must be worksheets|assessments"; exit 1;; esac
> > 
> > REPO="$HOME/Dropbox/ruberututor_knowledge_pack"
> > BASE="$REPO/materials/$TYPE"
> > mkdir -p "$BASE"
> > 
> > added=0; skipped=0; failed=0
> > 
> > route_one() {
> >   local PDF="$1"
> >   local base dest ok gfolder subject strand
> >   [[ -f "$PDF" ]] || { echo "âš ï¸  Missing file: $PDF"; ((failed++)); return; }> >   base="$(basename "$PDF")"
> > 
> >   eval "$(
> >     echo "$base" | awk -F'_' '
> >       {
> >         n=NF
> >         grade=$1
> >         if (grade !~ /^Gr[0-9]{1,2}$/) { print "ok=0"; next }
> >         gnum=substr(grade,3)
> >         gfolder="gr" gnum
> > 
> >         subj=$2
> >         subjl=tolower(subj)
> > 
> >         strand=""
> >         if ($3 ~ /^[A-F]$/ && $4 ~ /^[A-Za-z]+$/) {
> >           strand=$3"_"$4
> >         } else {
> >           strand=$3
> >         }
> > 
> >         printf "ok=1; gfolder=\"%s\"; subject=\"%s\"; strand=\"%s\"\n", gfolder, subjl, strand
> >       }'
> >   )"
> > 
> >   if [[ "${ok:-0}" != "1" ]]; then
> >     echo "âŒ Unrecognized filename (cannot parse grade/subject/strand): $base">     ((failed++)); return
> >   fi
> > 
> >   dest="$BASE/$subject/$gfolder/$strand"
> >   mkdir -p "$dest"
> > 
> >   if [[ -f "$dest/$base" ]]; then
> >     echo "â†©ï¸  Exists, skipping: $base"
> >     ((skipped++)); return
> >   fi
> > 
> >   cp "$PDF" "$dest/$base"
> >   echo "âœ… Added: $dest/$base"
> >   ((added++))
> > }
> > 
> > for f in "$@"; do
> >   route_one "$f"
> > done
> > 
> > cd "$REPO"
> > if (( added > 0 )); then
> >   git add materials
> >   git commit -m "Auto-route $TYPE PDFs: added $added (skipped=$skipped, failed=$failed)"
> >   git push
> > fi
